---
import { getCollection } from "astro:content";
import Layout from "../layouts/Home.astro";
import { filterOutDraftsIfProduction, firstFive, labelDrafts, sortByDate } from "../utils/utils";
import metadata from "../utils/metadata";

const { title, description } = metadata;

const allPosts = await getCollection('posts');

const posts = labelDrafts(firstFive(filterOutDraftsIfProduction(sortByDate(allPosts))));

const categories = await getCollection('categories');
---

<Layout posts={posts} categories={categories} title={title} description={description}/>
